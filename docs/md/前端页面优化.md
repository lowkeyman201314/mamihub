# 前端页面优化

- 代码语义性与可读性
- 代码扩展性与伪元素
- html和css和js打包及压缩
- 图片与特殊字体的处理
- 文件的位置、预加载、懒加载
- js代码性能优化
- js代码性能优化下
- 面向对象优化



## 一、代码语义性与可读性

### 1. 为什么要进行前端优化

- 能够使我们前端的页面打开的速度更快，

- 获得非常好的用户体验能够使我们的代码简洁好维护，资源好归类处理

### 2. 前端页面的优化角度

- 代码语义性（与SEO相关）
- 代码可读性（降低人力维护成本）
- 代码扩展性
- 页面加载速度
  - 文件大小、请求次数
  - 加载方式、代码性能

#### 2.1 语义性——语义性的重要性

- 语义性对SEO以及网站自然排名的影响
- SEO是什么
- 对语义性的要求使得网站发生了什么变化
  - table布局->DIV+CSS(HTML+CSS)
  - flash类网站的消亡

##### 2.1.1 什么是语义性

为了使我们的网站更好的被搜索引擎抓取收录，更自然的获得更高的流量，网站标签的语义化就显得尤为重要。所谓标签语义化，就是指标签的含义。

比如，网页上的文章的标题就可以用标题标签，网页上的各个栏目的栏目名称也可以使用标题标签，文章中内容的段落就得放在段落标签中，在文章中有想强调的文本，就可以使用 em 标签表示强调等等。


##### 2.1.2 代码语义性的好处

- 使页面没有css的情况下，也能够呈现出很好的内容结构；

- 有利于SEO，爬虫依赖标签来确定关键字的权重，因此可以和搜索引擎建立良好的沟通，帮助爬虫抓取更多的有效信息；

- 提升用户体验；

- 便于团队开发和维护，语义化使得代码更具有可读性；

- 方便其他设备解析，以有意义的方式来渲染网页；

##### 2.1.3 什么是SEO

> 【定义】：SEO（Search Engine Optimization）：汉译为搜索引擎优化。是一种方式：利用[搜索引擎](https://baike.baidu.com/item/搜索引擎/104812)的规则提高网站在有关搜索引擎内的[自然排名](https://baike.baidu.com/item/自然排名/2092669)。目的是让其在行业内占据领先地位，获得[品牌](https://baike.baidu.com/item/品牌/235720)收益。很大程度上是网站经营者的一种商业行为，将自己或自己公司的排名前移。
>
> ——摘自【百度百科】

不管是百度还是谷歌等百科网站，对于SEO解释都是大同小异，简单来说就是通过一定技术手段提高网站关键词搜索排名获取更多展示，然后从自然搜索结果获得更多网站流量的过程。

##### 2.1.4 语义性对SEO的影响

语义化标签主要是为了让搜索引擎更加的懂你，更加的明白你的网站。

不用html5语义化标签以前，判断你的网站主题以及内容或许要花很长时间；用了语义化标签后，搜索引擎懂你的周期会变短。

也就是我们常说的：收录量及关键词排名周期会得到提前，它是有利于SEO优化的。

**常用语义化标签**

```html
<title>：页面主体内容。
<hn>：h1~h6，分级标题，<h1> 与 <title> 协调有利于搜索引擎优化。
<ul>：无序列表。
<li>：有序列表。
    
<header>：页眉通常包括网站标志、主导航、全站链接以及搜索框。
<nav>：标记导航，仅对文档中重要的链接群使用。
<main>：页面主要内容，一个页面只能使用一次。如果是web应用，则包围其主要功能。
<article>：定义外部的内容，其中的内容独立于文档的其余部分。
<section>：定义文档中的节（section、区段）。比如章节、页眉、页脚或文档中的其他部分。
<aside>：定义其所处内容之外的内容。如侧栏、文章的一组链接、广告、友情链接、相关产品列表等。
<footer>：页脚，只有当父级是body时，才是整个页面的页脚。
    
<small>：呈现小号字体效果，指定细则，输入免责声明、注解、署名、版权。
<strong>：和 em 标签一样，用于强调文本，但它强调的程度更强一些。
<em>：将其中的文本表示为强调的内容，表现为斜体。
<mark>：使用黄色突出显示部分文本。
    
<figure>：规定独立的流内容（图像、图表、照片、代码等等）（默认有40px左右margin）。
<figcaption>：定义 figure 元素的标题，应该被置于 figure 元素的第一个或最后一个子元素的位置。
<cite>：表示所包含的文本对某个参考文献的引用，比如书籍或者杂志的标题。
<blockquoto>：定义块引用，块引用拥有它们自己的空间。
<q>：短的引述（跨浏览器问题，尽量避免使用）。
    
<time>：datetime属性遵循特定格式，如果忽略此属性，文本内容必须是合法的日期或者时间格式。
<abbr>：简称或缩写。
<dfn>：定义术语元素，与定义必须紧挨着，可以在描述列表dl元素中使用。
<address>：作者、相关人士或组织的联系信息（电子邮件地址、指向联系信息页的链接）。
    
<del>：移除的内容。
<ins>：添加的内容。
<code>：标记代码。
<meter>：定义已知范围或分数值内的标量测量。（Internet Explorer 不支持 meter 标签）
<progress>：定义运行中的进度（进程）。
```

##### 2.1.5 语义性对网站自然排名的影响

自然排名，它是根据[搜索引擎算法](https://baike.baidu.com/item/搜索引擎算法/10116955)而获得排列结果，是一种比较通俗的叫法。当我们搜索某个关键词时，搜索引擎根据对与该关键词相关的网页分析的结果进行排列，然后把按算法认为某页面最符合（或说内容相关的）对该关键词的解释的页面展示在最前的位置。

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="搜索,语义,内容,关键词,时候,用户,问题,结果,意思,字面,经验教程">
    <meta name="description" content="如果你这段时间在使用手机百度进行搜索，你会发现一个问题，当你搜索一些关于“天气”这类名词的时候，它会自动为你播报内容，我们简单理解这应该是0排名吧！ 当语义搜索完全投入搜索引擎使用中，它会降低一些S…">
    <title>Title</title>
</head>
<body>

</body>
</html>
```

##### 2.1.6 搜索引擎爬虫的评判标准

- 良好的缩进与规范的格式

- 良好的扩展性（代码量小）

- 合理的标签语义
- 合理的标签嵌套
- 404页面必不可少

#### 2.2 【案例】前端页面优化

##### 2.2.1 案例1：代码量/嵌套层数

 > 导航菜单的制作

```html
<div class="nav">
    <a href="" title="">SEO入门</a>
    <a href="" title="">SEO入门</a>
    <a href="" title="">SEO入门</a>
    <a href="" title="">SEO入门</a>
    <a href="" title="">SEO入门</a>
</div>
```

```html
<ul class="nav">
    <li><a href="" title="">SEO入门1</a></li>
    <li><a href="" title="">SEO入门2</a></li>
    <li><a href="" title="">SEO入门3</a></li>
    <li><a href="" title="">SEO入门4</a></li>
    <li><a href="" title="">SEO入门5</a></li>
</ul>
```

##### 2.2.2 案例2：title与meta

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="搜索,语义,内容,关键词,时候,用户,问题,结果,意思,字面,经验教程">
    <meta name="description"
          content="如果你这段时间在使用手机百度进行搜索，你会发现一个问题，当你搜索一些关于“天气”这类名词的时候，它会自动为你播报内容，我们简单理解这应该是0排名吧！ 当语义搜索完全投入搜索引擎使用中，它会降低一些S…">
    <title>SEO入门</title>
</head>
<body>

</body>
</html>
```

##### 2.2.3 案例3：标签语义化

> 权重、标签嵌套关系...

- div、span
- h1-h6、p
- ul、ol、li、dl、dt、dd
- a、img、table

##### 2.2.4 案例4：特殊属性

> img的alt和title属性
>
> a的title属性

```html
<ul>
    <li><a href="http://www.yuntuzhilian.com" title="云图智联,IT,h5,实战派,Java">云图智联IT实战派</a></li>
    <li><a href="" title=""></a></li>
    <li><a href="" title=""></a></li>
</ul>
```

##### 2.2.5 案例5：网页结构与标签选择

> 缩略图

<img src="https://gitee.com/lexizhi/blogimg/raw/master/noteimg/20211202162557.png" alt="image-20211202162557188" style="zoom:50%;" />

```html
<div class="house">
    <dl>
        <dt><a href="" title=""><img src="" alt=""></a></dt>
        <dd>
            <h2><a href="">标题</a></h2>
            <p>描述信息</p>
            <b>价格</b>
        </dd>
    </dl>
</div>
```

#### 2.3 代码可读性

##### 2.3.1 标签的嵌套规则

- 行内元素可以包含块状元素或者行内元素，其他任何行内元素都不允许包含块状元素
- p、h1-h6可以直接包含行内元素和文本信息，但是不允许包含块状元素
- dl元素只允许包含dt和dd，同时dt不能包含行内元素，dd可以包含任何元素
- 不建议form元素直接包含input元素
- table元素建议直接包含caption、colgroup、col、thead、tbody、tfoot，不建议直接包含tr或者其他任何元素

```html
<h1><h2>hhh</h2></h1>
解析为：
<h1></h1>
<h2>hhh</h2>
```

##### 2.3.2 CSS代码书写规范

- 命名采用更简明有语义的英文单词进行组合

- 针对单词可以进行适当缩写
- 采用小写字母加中划线的方式进行命名，不使用下划线或大写字母
- CSS代码的书写顺序遵循CSS样式的渲染顺序
  - 显示属性：display、float、position等
  - 自身属性：width、height、margin、padding、border
  - 文本属性：font-size、line-height、text-align等
  - 其他：CSS3等

##### 2.3.3 JS命名规范与推荐

###### 标识符命名规范

- 区分大小写
- 第一个字符必须是一个字母、下划线或刘渊甫美元符号，其他字符可以是字母、下划线、美元符号或数字
- 不能包含空格
- 不能以关键字或保留字命名

###### 标识符命名推荐

- 遵循小驼峰命名法，除了第一个首字母之外，其他的单词首字母大写
- 变量或者属性一名词开头，方法或函数以动词开头
- 常量命名：字母全部大写，多个单词之间使用下滑线分隔
- 构造函数的函数名称：首字母大写，遵循大驼峰命名法

###### 合理的注释与空格

- 在绝大多数的操作符前后，需要添加空格
- 在数组项的逗号的后面需要添加空格
- 在对象属性的逗号之后、属性名和属性值分开的冒号前后，均需要添加空格

- 函数声明的大括号之前（参数括号之后）需要添加空格
- 函数中，分隔各个参数的逗号之后需要添加空格
- 合理添加注释
- 注释符号与注释内容之间添加空格

```javascript
<script>
    //行注释
    /*块注释*/
    var person = {
        name:"yuLin",
        age:20
    }
    /*
    * 功能:
    * 参数:
    * 描述：
    *
    */
    function fn(){

    }
</script>
```

## 二、代码扩展性与伪元素



img标签的宽高与文本超出

代码扩展性——伪类选择器

代码扩展性——margin的负值

伪元素的应用

a标签的可触区问题

### 1. 前后端数据交互常见问题

#### 1.1 代码扩展性不足引发的问题

##### 1.1.1 图片尺寸与文本溢出

为图片设置合理宽度与高度

多行文本超出，溢出部分隐藏

```html
overflow: hidden;
```

单行文本超出，显示为省略号

```html
/**溢出部分隐藏/
overflow: hidden;
/*溢出部分的文字用...代替*/
text-overflow: ellipsis;
/**不允许换行/
white-space: nowrap;
```

##### 1.1.2 相似元素的某个不同样式设置

overflow超出隐藏

> 消除顶部边框

```html

```

margin负值的应用

> 平均分布的边距设置

```html

```

:first-child等伪类选择器

> 动态创建标签和渲染数据，添加个别样式

```html

```

#### 1.2 【案例】相似元素不同样式

> 需求如下：

<img src="https://gitee.com/lexizhi/blogimg/raw/master/noteimg/20211202180432.png" alt="image-20211202180432442" style="zoom:50%;" />

```html
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            margin: 0 auto;
            padding: 0;
        }
        .view {
            width: 330px;
            height: 215px;
            border: 1px solid red;
            /*可视区域之外的部分隐藏*/
            overflow: hidden;
        }
        .content{
            width: 345px;
            height: 230px;
        }
        .content>div{
            float: left;
            width: 100px;
            height: 100px;
            margin: 0 15px 15px 0;
            background-color: #39f;


        }
    </style>
</head>
<body>
<div class="view">
    <div class="content">
        <div>内容块01</div>
        <div>内容块02</div>
        <div>内容块03</div>
        <div>内容块04</div>
        <div>内容块05</div>
        <div>内容块06</div>
    </div>
</div>
</body>
</html>
```





